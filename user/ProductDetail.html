<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>

  <link rel="stylesheet" href="./../vendor/bootstrap-5.0.2-dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/remixicon/fonts/remixicon.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <link rel="stylesheet" href="./../asset/icon/cart-shopping-solid.svg">
  <link rel="stylesheet" href="./../asset/css/style1.css">
  <!-- <link rel="stylesheet" href="./../asset/css/style.css"> -->
  <style>
    /* Đảm bảo các cột có khoảng cách đều */
  </style>
</head>

<body>
  <header style="width: auto; z-index: 10000;">
    <div class="container-fluid bgtop2 fixed-top">
      <div class="row p-3 align-items-center">
        <!-- Logo -->
        <div class="col-1  ms-1">
          <img src="./../vendor/image/logo-coolmate-new.svg" alt="">
        </div>

        <!-- Sản phẩm -->
        <div class="col xl-6 lg-6 md-5">
          <!-- Desktop menu (dàn ngang) -->
          <div class="d-none d-md-flex justify-content-center">
            <ul class="nav">
              <li class="nav-item">
                <a class="nav-link" href="./../index.html">Trang chủ</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="./product.html">Sản phẩm</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#">Giới thiệu</a>
              </li>
            </ul>
          </div>

          <!-- Mobile menu (dọc) -->
          <nav class="navbar navbar-expand-lg navbar-dark bg-dark d-md-none">
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
              aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
              <ul class="navbar-nav mx-auto">
                <li class="nav-item">
                  <a class="nav-link" href="#">Trang chủ</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="#">Sản phẩm</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="#">Giới thiệu</a>
                </li>
              </ul>
            </div>
          </nav>
        </div>

        <!-- Tìm kiếm -->
        <div class="col-md-1 col-xl-3 col-lg-1">
          <div class="header-search">
            <input type="text" placeholder="Tìm kiếm" class="header-search-rp" />
            <button class="header-search-css" style="color: black;"><i class="ri-search-2-line"></i></button>
          </div>
          <div style="display: none;" class="search-delete">
            <button class="clear-btn" id="clear-btn">
              <i class="ri-close-line"></i>
            </button>
          </div>
        </div>

        <!-- Tài khoản và Giỏ hàng -->
        <div class="col-xl-2 col-lg-4 md-5 text-end d-flex justify-content-end align-items-center gap-3 me-3">
          <div class="header-account">
            <div class="show-signup">
              <div class="sign-in-js" style="display: inline-block;">Đăng Nhập</div>/<div class="register-js"
                style="display: inline-block;">Đăng Ký</div>
            </div>

          </div>
          <div class="header-account ac" style="display: none;">
            <i class="fa fa-user ac-img" style="color: white;"></i>
            <ul class="account-menu">
              <li><a href="./profile.html">Hồ sơ</a></li>
              <li><a href="./orders.html">Đơn hàng</a></li>
              <li>
                <a href="#" id="logout">Đăng xuất</a>
              </li>
            </ul>
          </div>
          <div class="header-cart">
            <i class="ri-shopping-cart-line" number="0"></i>
          </div>
        </div>
      </div>
    </div>
    <!-- Tìmm kiếm cơ bản -->
    <!-- <div class="search-css search-cb" style="display: none;">
        <div class="search-box">
            <div class="search-container">
                <input class="sb-input" type="text" placeholder="Tìm kiếm" />
                <button class="sb-button"><i class="ri-search-2-line"></i></button>
            </div>

        </div>
        <div class="btn btn-light">Tìm kiếm nâng cao</div>
    </div> -->
    <!-- Tìm kiếm nâng cao -->
    <div class="search-css" style="display: none;">
      <div class="search-box">
        <div class="search-container">
          <input class="sb-input" type="text" placeholder="Tìm kiếm" />

          <div class="dropdown category-css" style="display: none;">
            <select name="category" id="category" style="padding-right: 10px;">
              <option value="">Tất cả</option>
              <option value="electronics">Áo thun</option>
              <option value="fashion">Áo sơ mi</option>
              <option value="books">Áo Polo</option>
            </select>
          </div>
          <div class="dropdown price-css" style="display: none;">
            <select id="price-filter">
              <option value="all">Tất cả</option>
              <option value="0-200000">Dưới 200.000 VND</option>
              <option value="200000-5000000">200.000 VND - 299.000 VND</option>
              <option value="5000000-10000000">300.000 VND - 499.000 VND</option>
              <option value="10000000">Trên 500.000 VND</option>
            </select>
          </div>
          <button class="sb-button"><i class="ri-search-2-line"></i></button>
        </div>
        <div
          class="search-nc bg-primary text-white text-center rounded-pill px-4 py-1 d-flex align-items-center ms-2 bg-dark text-light"
          style="cursor: pointer;">
          <i class="bi bi-search"></i> Tìm kiếm nâng cao
        </div>
      </div>

    </div>
  </header>





  <!-- Hiện các  thông báo -->

  <div class="body-signup r-js" style="display: none;">
    <div class="form-wrapper ">
      <div class="close-btn">
        <i class="ri-close-line"></i>
      </div>
      <div class="bbd-signup fwr-js">
        <div class="sign-up-header">ĐĂNG KÝ</div>
        <p>Bạn đã có tài khoản? <a href="./../login.html"><span style="color: blue;">Đăng nhập ngay</span></a></p>
        <div class="sign-up-form">
          <form action="" method="POST" class="form" id="form-1">
            <div class="input-box">
              <span class="detail">Tên đăng nhập</span>
              <input id="name" name="name" type="text" class="form-control" placeholder="Nhập tên đăng nhập của bạn">
              <span class="invalid-message"></span>
            </div>
            <div class="input-box">
              <span class="detail">Email</span>
              <input id="email" name="email" type="text" class="form-control" placeholder="Email">
              <span class="invalid-message"></span>
            </div>
            <!-- <div class="input-box">
                  <span class="detail">Số điện thoại</span>
                  <input id="phone-number" name="phone-number" type="text" class="form-control"
                    placeholder="Số điện thoại">
                  <span class="invalid-message"></span>
                </div> -->
            <div class="input-box">
              <span class="detail">Mật khẩu</span>
              <input id="password" name="password" type="password" class="form-control"
                placeholder="Nhập mật khẩu của bạn">
              <span class="invalid-message"></span>
            </div>
            <div class="input-box">
              <span class="detail">Xác nhận mật khẩu</span>
              <input id="confirm-password" name="confirm-password" type="password" class="form-control"
                placeholder="Xác nhận lại mật khẩu">
              <span class="invalid-message"></span>
            </div>
            <button type="submit" class="sign-up-button form-submit">Đăng ký</button>
          </form>
        </div>
      </div>
    </div>
  </div>
  <div class="body-signup s-js" style="display: none;">
    <div class="form-wrapper fws-js">
      <div class="close-btn">
        <i class="ri-close-line"></i>
      </div>
      <div class="bbd-signup ">

        <h3 class="sign-up-header">ĐĂNG NHẬP</h3>
        <p>Trở thành thành viên của 360 Boutique <a href="./../signup.html"><span style="color: blue;">Đăng ký
              ngay</span></a></p>
        <div class="sign-up-form">
          <form action="" method="post" class="form" id="login">
            <div class="form-group input-box">
              <label for="user">
                <b>Tên đăng nhập <span style="color: red;">&#42;</span></b>
              </label>
              <input class="form-input form-control" name="user" id="user" type="text"
                placeholder="Nhập tên đăng nhập của bạn" required>
              <span class="invalid-message"></span>
            </div>
            <div class="form-group input-box">
              <label for="pass">
                <b>Mật khẩu <span style="color: red;">&#42;</span></b>
              </label>
              <input class="form-input form-control" name="pass" id="pass" type="password" placeholder="Nhập mật khẩu"
                style="position: relative;">
              <span class="show-btn" style="position: absolute;"><i class="fas fa-eye"></i></span>
              <span class="invalid-message"></span>
            </div>

            <div class="sub-form-group">
              <div class="sub1">
                <input type="checkbox" name="" id="remember">
                <label for="remember"><b>Ghi nhớ mật khẩu</b></label>
              </div>
            </div>

            <button type="submit" class="submit-button form-group">ĐĂNG NHẬP</button>
          </form>
        </div>
      </div>
    </div>
  </div>
  <!-- Modal for login warning -->
  <!-- Modal -->
  <div class="login-warning-modal" id="login-warning-modal" style="display: none;">
    <div class="modal-content">
      <span class="close-btn" onclick="closeModal()">&times;</span>
      <p class="modal-text">Vui lòng đăng nhập để thêm sản phẩm vào giỏ hàng.</p>
      <button class="ok-btn" onclick="closeModal()">OK</button>
    </div>
  </div>
  <section class="product-detail product-detail-js p-to-top container">

  </section>

  <!-- Modal -->
  <div class="modal" id="myModal">
    <div class="modal-content">
      <h2>Thông báo</h2>
      <p>Vui lòng đăng nhập để xem giỏ hàng.</p>
      <div class="modal-actions">
        <button class="btn-login">Đăng Nhập</button>
      </div>
      <!-- Nút đóng ở ngoài button -->
      <span class="close">&times;</span>
    </div>
  </div>



  <script src="./../vendor/bootstrap-5.0.2-dist/js/bootstrap.bundle.min.js"></script>
  <script src="./../asset/js/dssp.js"></script>
  <script src="./../asset/js/script.js"></script>
  <script src="./../asset/js/validator.js"></script>

  <script>
    load();
    console.log("chyaj");
    let output = document.querySelector(".product-detail-js");
    const urlParams = new URLSearchParams(window.location.search);
    const productId = urlParams.get('id');
    detailProduct(productId);
    function detailProduct(masp) {

      if (masp == null) {
        masp = 1;
      }

      let productDetail = document.querySelector(".product-detail-js");
      console.log(productDetail);
      console.log(products);
      let product;
      products.forEach((value) => {
        if (value.id == masp) {
          product = value;
        }
      })
      console.log(product);
      productDetail.innerHTML = `
<div class="container">
  <div class="row-flex row-flex-product-detail">
    <p>Sản phẩm</p>
    <i class="ri-arrow-right-line"> </i>
    <p>${product.title}</p>
  </div>
  <div class="row-grid">
    <div class="product-detail-left">
      <img
        class="product-image-main"
        src="./../${product.img[0]}"
        alt=""
      />
      <div class="product-image-items">
        <img
          class="active"
          src="./../${product.img[0]}"
          alt=""
        />
        <img
          src="./../${product.img[1]}"
          alt=""
        />
        <img
          src="./../${product.img[2]}"
          alt=""
        />
        <img
          src="./../${product.img[3]}"
          alt=""
        />
      </div>
    </div>
    <div class="product-detail-right">
      <div class="product-detail-right-info">
        <h1>${product.title}</h1>
        <span>${product.material}</span>
        <div class="product-price">
          <p class="price">${product.price.toLocaleString("vi-VN")} <del></p>
        </div>
      </div>
      <div class="product-detail-right-des">
        <h2>Đặc điểm nổi bật</h2>
        <ul>
          <li>${product.introduce[0]}</li>
           <li>${product.introduce[1]}</li>
           <li>${product.introduce[2]}</li>
          <li>${product.introduce[3]}</li>
           <li>${product.introduce[4]}</li>
          <li>Tự hào sản xuất tại Việt Nam</li>
        </ul>
      </div>
      <div class="product-detail-right-quantity">
        <h2>Số lượng:</h2>
        <div class="product-detail-right-quantity-input">
          <i class="ri-subtract-fill"></i>
          <input
            onkeydown="return false"
            class="quantity-input"
            type="number"
            value="1"
          />
          <i class="ri-add-line"></i>
        </div>
      </div>
      <div class="product-detail-right-addcart">
        <button id="add"  class="main-btn" onclick="addToCart('${product.masp
        }')">Thêm vào giỏ hàng</button>
      </div>
    </div>
  </div>
  <div class="row-flex">
    <div class="product-detail-content">
      <h2>Chi tiết sản phẩm</h2>
      <p>
        Áo thun nam là một trong những item cơ bản và linh hoạt nhất trong tủ đồ của phái mạnh. Với thiết kế đơn giản nhưng không kém phần thời trang, áo thun nam có thể kết hợp với nhiều loại quần và phụ kiện khác nhau, tạo nên những phong cách đa dạng từ năng động, trẻ trung đến lịch lãm, trưởng thành.
      </p>
</div>
  </div>
</div>
`;
      productDetail.style.display = "block";
    }
    // detailProduct(productId);

  </script>


  <script>
    //CLick tìm kiếm nâng cao

    function clickSearch() {
      document.querySelector(".header-search").addEventListener("click", function () {
        console.log("click rồi nè");
        this.style.display = "none"; // Ẩn thẻ bằng cách đặt display thành "none"
        document.querySelector(".search-css").style.display = "";
        document.querySelector(".search-delete").style.display = "";
        // console.log(document.querySelector(".clear-btn"));
        // document.querySelector(".clear-btn").style.display = "";


      });
      document.querySelector(".clear-btn").addEventListener("click", function () {
        document.querySelector(".search-css").style.display = "none";
        document.querySelector(".search-delete").style.display = "none";
        document.querySelector(".header-search").style.display = "";
      })
      // document.querySelector(".sb-input").addEventListener("click", function () {
      //   console.log(document.querySelector(".sb-input").style);
      //   // document.querySelector(".sb-input").style;
      // })
      document.querySelector(".search-nc").addEventListener("click", function () {
        if (document.querySelector(".search-nc").innerHTML == "Tìm kiếm cơ bản") {
          document.querySelector(".category-css").style.display = "none";
          document.querySelector(".price-css").style.display = "none";
          document.querySelector(".search-nc").innerHTML = "Tìm kiếm nâng cao";
        }
        else {
          document.querySelector(".category-css").style.display = "";
          document.querySelector(".price-css").style.display = "";
          document.querySelector(".search-nc").innerHTML = "Tìm kiếm cơ bản";
        }



      })

    }
    clickSearch();
    document.querySelectorAll('.btn-dm').forEach(button => {
      button.addEventListener('click', function () {
        // Xóa active và nền đen cho tất cả các nút
        document.querySelectorAll('.btn-dm').forEach(btn => {
          btn.classList.remove('active');
          btn.classList.remove('btn-dark'); // Bỏ nền đen
          btn.classList.add('btn-light'); // Đảm bảo các nút khác có nền sáng
        });
        // Thêm active và nền đen cho nút được click
        this.classList.add('active');
        this.classList.add('btn-dark'); // Thêm nền đen khi active
        this.classList.remove('btn-light'); // Bỏ nền sáng khi active
      });
    });
  </script>
  <script>
    Validator({
      form: '#form-1',
      rules: [
        Validator.isRequired('#name', 'Vui lòng nhập tên đăng nhập'),
        Validator.isRequired('#email', 'Vui lòng nhập email'),
        Validator.isEmail('#email'),
        Validator.isRequired('#password', 'Vui lòng nhập mật khẩu'),
        Validator.minLength('#password', 8),
        Validator.isRequired('#confirm-password', 'Vui lòng xác nhận lại mật khẩu'),
        Validator.isConfirmed('#confirm-password', function () {
          return document.querySelector('#form-1 #password').value;
        }, 'Mật khẩu nhập lại không chính xác')
      ],
      onSubmit: function (data) {
        console.log("bấm rồi nè1");
        let tmp = {
          data,
          cart: []
        }
        // let userList = (JSON.parse(localStorage.getItem('userList'))) || [];
        let userList = [];
        userList.push(tmp);
        document.querySelector('.r-js').style.display = 'none';
        console.log("Đăng ký thành công");
        localStorage.setItem('userList', JSON.stringify(userList));
        console.log(JSON.parse(localStorage.getItem('userList')));
        document.querySelector('.s-js').style.display = 'flex';

      }
    });
  </script>
  <script>
    console.log(document.querySelector('.show-signup').style);
    const user = JSON.parse(localStorage.getItem('user'));
    if (user != null) {
      document.querySelector('.show-signup').style.display = 'none';
      document.querySelector('.ac').style.display = '';
      setcart();
    }
    const logoutButton = document.getElementById("logout");

    logoutButton.addEventListener('click', function () {
      // Xóa thông tin người dùng trong localStorage
      localStorage.setItem('user', JSON.stringify(null));

      // // Ẩn thông tin tài khoản
      document.querySelector('.ac').style.display = 'none';
      document.querySelector('.header-account').style.display = "";

    });

    document.addEventListener('DOMContentLoaded', () => {
      // Lấy các phần tử cần thiết
      const cartIcon = document.querySelector('.header-cart i');
      const modal = document.getElementById('myModal');  // Sửa lại ID để khớp với HTML
      const closeModal = modal.querySelector('.close');
      const loginButton = modal.querySelector('.btn-login');
      const closeButton = modal.querySelector('.btn-close');

      // Mở modal khi click vào icon giỏ hàng
      cartIcon.addEventListener('click', () => {
        const user = JSON.parse(localStorage.getItem('user'));
        if (!user) {
          // Nếu chưa đăng nhập, hiển thị modal
          modal.style.display = 'flex';
        } else {
          // Nếu đã đăng nhập, chuyển hướng đến trang giỏ hàng
          window.location.href = './user/cart.html';
        }
      });

      // Đóng modal khi click vào dấu X
      closeModal.addEventListener('click', () => {
        modal.style.display = 'none';
      });

      // Đóng modal khi click vào nút "Đóng"
      closeButton.addEventListener('click', () => {
        modal.style.display = 'none';
      });

      // Chuyển hướng đến trang đăng nhập khi click vào nút "Đăng Nhập"
      loginButton.addEventListener('click', () => {
        window.location.href = './login.html';
      });

      // Đóng modal khi click bên ngoài modal
      window.addEventListener('click', (event) => {
        if (event.target === modal) {
          modal.style.display = 'none';
        }
      });
    });

    Validator_login({
      form: '#login',
      rules: [
        Validator_login.isRequired('#user', 'Vui lòng nhập tên đăng nhập'),
        Validator_login.isRequired('#pass', 'Vui lòng nhập mật khẩu')
      ],
      onSubmit: function (data) {
        let userList = (JSON.parse(localStorage.getItem('userList'))) || [];

        console.log("bấm rồi nè")
        console.log(userList);
        let check = false;
        for (let i = 0; i < userList.length; i++) {
          if (userList[i].data.name === data.user && userList[i].data.password === data.pass) {
            check = true;
            usercart = userList[i];
            localStorage.setItem('user', JSON.stringify(userList[i]));
            // let usercart = JSON.parse(localStorage.getItem('user'));
            console.log(JSON.parse(localStorage.getItem('user')));
            console.log("đăng nhập thành công");

          }
        }
        if (check) {
          // window.location.href = "index.html";
          document.querySelector('.s-js').style.display = 'none';
          console.log("đăng nhập thành công");
          document.querySelector('.show-signup').style.display = 'none';
          document.querySelector('.ac').style.display = '';
          setcart();
          // document.querySelector('.login-fail').innerHTML = '';
        } else {
          // document.querySelector('.login-fail').innerHTML = 'Sai tên đăng nhập hoặc mật khẩu';
          console.log("lỗi nè")
        }
        document.querySelector('.form-input').value = ''
        console.log(JSON.parse(localStorage.getItem('userList')));
      }
    });
    // Xử lý sự kiện khi nhấn vào các nút size
    document.querySelectorAll('.size-btn').forEach(button => {
      button.addEventListener('click', function () {
        console.log(this);
        // Xóa trạng thái active của tất cả các nút size
        document.querySelectorAll('.size-btn').forEach(btn => {
          btn.classList.remove('active');
        });
        // Thêm trạng thái active cho nút được nhấn
        this.classList.add('active');
      });
    });


  </script>
  <script>function vnd(price) {
      return price.toLocaleString("vi-VN", { style: "currency", currency: "VND" });
    }
    var productAll = JSON.parse(localStorage.getItem("products")).filter(
      (item) => item.status == 1
    );

    function getProductInfo(masp) {
      let products = JSON.parse(localStorage.getItem("products"));
      return products.find((item) => {
        return item.masp == masp;
      });
    }


    // product detail
    const imageSmall = document.querySelectorAll(".product-image-items img");
    const imageBig = document.querySelector(".product-image-main");
    for (let i = 0; i < imageSmall.length; i++) {
      imageSmall[i].addEventListener("click", () => {
        imageBig.src = imageSmall[i].src;
        imageSmall[i].classList.add("active");
        for (let j = 0; j < imageSmall.length; j++) {
          if (i !== j) {
            imageSmall[j].classList.remove("active");
          }
        }
      });
    }
    // quantity product
    const quantityInput = document.querySelector(".quantity-input");
    const addButton = document.querySelector(".ri-add-line");
    const subtractButton = document.querySelector(".ri-subtract-fill");

    if (quantityInput && addButton && subtractButton) {
      addButton.addEventListener("click", () => {
        let currentValue = parseInt(quantityInput.value) || 0; // Chuyển đổi giá trị sang số
        quantityInput.value = currentValue + 1;
      });

      subtractButton.addEventListener("click", () => {
        let currentValue = parseInt(quantityInput.value) || 0;
        if (currentValue > 1) {
          quantityInput.value = currentValue - 1;
        }
      });
    }

  </script>





  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // Lấy các phần tử cần thiết
      const cartIcon = document.querySelector('.header-cart i');
      const modal = document.getElementById('myModal');  // Sửa lại ID để khớp với HTML
      const closeModal = modal.querySelector('.close');
      const loginButton = modal.querySelector('.btn-login');
      const closeButton = modal.querySelector('.btn-close');

      // Mở modal khi click vào icon giỏ hàng
      cartIcon.addEventListener('click', () => {
        const user = JSON.parse(localStorage.getItem('user'));
        if (!user) {
          // Nếu chưa đăng nhập, hiển thị modal
          modal.style.display = 'flex';
        } else {
          // Nếu đã đăng nhập, chuyển hướng đến trang giỏ hàng
          window.location.href = './user/cart.html';
        }
      });

      // Đóng modal khi click vào dấu X
      closeModal.addEventListener('click', () => {
        modal.style.display = 'none';
      });

      // Đóng modal khi click vào nút "Đóng"
      closeButton.addEventListener('click', () => {
        modal.style.display = 'none';
      });

      // Chuyển hướng đến trang đăng nhập khi click vào nút "Đăng Nhập"
      loginButton.addEventListener('click', () => {
        window.location.href = './login.html';
      });

      // Đóng modal khi click bên ngoài modal
      window.addEventListener('click', (event) => {
        if (event.target === modal) {
          modal.style.display = 'none';
        }
      });
    });
  </script>
</body>

</html>
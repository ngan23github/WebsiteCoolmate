<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>

  <link rel="stylesheet" href="./../vendor/bootstrap-5.0.2-dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/remixicon/fonts/remixicon.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <link rel="stylesheet" href="./../asset/icon/cart-shopping-solid.svg">
  <link rel="stylesheet" href="./../asset/css/style1.css">
  <link rel="stylesheet" href="./../asset/css/style.css">
  <!-- <link rel="stylesheet" href="./../asset/css/style.css"> -->
  <style>
    .cart-right-header {
      display: flex;
      justify-content: space-between;
      /* Đặt khoảng cách giữa các phần tử */
      align-items: center;
      /* Căn giữa theo chiều dọc */
      margin-bottom: 10px;
      /* Khoảng cách bên dưới tiêu đề */
    }

    .cart-right-select-address select {
      width: 100%;
      padding: 5px 10px;
      /* Thêm khoảng trống trong ô chọn */
      font-size: 14px;
      /* Kích thước chữ */
      border: 1px solid #ccc;
      /* Viền xám nhẹ */
      border-radius: 5px;
      /* Bo góc */
    }

    /* 
    input:disabled,
    select:disabled {
      background-color: #f5f5f5;
      cursor: not-allowed;
      color: #999;
    } */
  </style>
  <style>
    .nav-link {
      padding: 5px 10px;
    }

    .header-cart .btn-outline-light {
      border: none;
      background: transparent;
    }

    .header-cart .btn-outline-light i {
      color: white;
      /* Đảm bảo icon có màu trắng */
    }

    .header-cart .btn-outline-light .badge {
      display: none;
      /* Loại bỏ chấm đen (badge) */
    }

    .header-cart .btn-outline-light {
      border: none;
      background: transparent;
    }

    .header-cart .btn-outline-light i {
      color: white;
    }

    .header-cart .badge {
      display: inline-block;
      padding: 0.2em 0.5em;
      font-size: 0.8rem;
      color: white;
      background-color: red;
      border-radius: 50%;
      top: -5px;
      right: -5px;
    }

    .header-cart .badge {
      font-size: 1rem;
    }
  </style>
  <style>
    /* SEARCH nè */
    /* Khung tìm kiếm nâng cao */
    .search-css {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background-color: #fff;
      border: 1px solid #ddd;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      padding: 20px;
      z-index: 1000;
      width: 80%;
      max-width: 600px;
      border-radius: 10px;
    }

    /* Các thành phần trong form tìm kiếm */
    .search-box {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    /* Input tìm kiếm */
    .sb-input {
      border-radius: 5px;
      padding: 10px;
      border: 1px solid #ccc;
    }

    /* Các dropdown */
    .dropdown select.form-select {
      border-radius: 5px;
      padding: 0.375rem 0.75rem;
      border: 1px solid #ccc;
    }

    /* Nút tìm kiếm */
    .sb-button {
      margin-top: 20px;
      background-color: #333;
      color: #fff;
      border: none;
      padding: 10px;
      border-radius: 5px;
      width: 100%;
      cursor: pointer;
    }

    /* Nút tắt tìm kiếm nâng cao */
    .clear-btn {
      background: transparent;
      border: none;
      color: #333;
    }

    /* Màu sắc khi hover */
    .clear-btn:hover,
    .btn-dark:hover {
      color: #007bff;
    }

    /* Các phần tử khi hover */
    .dropdown select.form-select:hover,
    .sb-input:hover {
      border-color: #007bff;
    }

    /* Định dạng các nút Tìm kiếm cơ bản và Tìm kiếm nâng cao */
    .search-container {
      display: flex;
      justify-content: center;
      gap: 20px;
    }


    #basic-search-btn.active,
    #advanced-search-btn.active {
      background-color: #007bff;
      color: white;
    }

    /* CSS để ẩn phần tử khi cần */
    #advanced-search-container,
    #basic-search-container {
      display: none;
    }

    @media (max-width: 767px) {

      /* Khi màn hình nhỏ hơn 767px */
      .search-css {
        padding: 20px;
      }

      .form-control {
        width: 100%;
        /* Đảm bảo các input chiếm hết chiều rộng */
      }

      .btn {
        width: 100%;
        /* Đảm bảo các nút chiếm hết chiều rộng */
        margin-top: 10px;
      }
    }
  </style>
</head>

<body>
  <header>
    <div class="container-fluid bg-dark fixed-top">
      <div class="row align-items-center p-2">
        <!-- Logo -->
        <div class="col-auto">
          <a href="./../index.html">
            <img src="./../vendor/image/logo-coolmate-new.svg" alt="Logo" style="height: 40px;">
          </a>
        </div>

        <!-- Menu -->
        <div class="col d-none d-md-block">
          <ul class="nav justify-content-center">
            <li class="nav-item">
              <a class="nav-link text-white" href="./../index.html">Trang chủ</a>
            </li>
            <li class="nav-item">
              <a class="nav-link text-white" href="./product.html">Sản phẩm</a>
            </li>
            <li class="nav-item">
              <a class="nav-link text-white" href="#">Giới thiệu</a>
            </li>
          </ul>
        </div>

        <!-- Mobile Menu Toggle -->
        <div class="col-auto d-md-none">
          <button class="navbar-toggler text-white border-0" type="button" data-bs-toggle="collapse"
            data-bs-target="#mobileMenu" aria-expanded="false" aria-label="Toggle navigation">
            <i class="fas fa-bars"></i>
          </button>
        </div>

        <!-- Search -->
        <div class="col-auto ms-auto">
          <div class="d-flex align-items-center search-js">
            <input type="text" class="form-control form-control-sm d-none d-md-block search-click-js"
              placeholder="Tìm kiếm">
            <button class="btn btn-sm btn-outline-light ms-2 "><i class="ri-search-2-line"></i></button>

          </div>
          <div style="display: none;" class="search-delete">
            <button class="clear-btn" id="clear-btn">
              <i class="ri-close-line"></i>
            </button>
          </div>

        </div>

        <!-- Account & Cart -->

        <div class="col-auto d-flex align-items-center gap-3">
          <div class="header-account d-none d-md-block">
            <div class="show-signup" style="">
              <div class="text-white">
                <div class="sign-in-js" style="display: inline-block;">Đăng Nhập</div>/<div class="register-js"
                  style="display: inline-block;">Đăng Ký</div>
              </div>
            </div>
          </div>
          <div class="header-account ac">
            <i class="fa fa-user ac-img" style="color: white;"></i>
            <ul class="account-menu">
              <li><a href="./user/profile.html">Hồ sơ</a></li>
              <li><a href="./user/orders.html">Đơn hàng</a></li>
              <li>
                <div style="color: black;" id="logout">Đăng xuất</div>
              </li>
            </ul>
          </div>
          <div class="header-cart position-relative">
            <button class="btn btn-sm btn-outline-light" style="border: none; background: transparent;">
              <i class="ri-shopping-cart-line" style="color: white;" number="0"></i>
              <!-- Số lượng giỏ hàng -->

            </button>
          </div>
        </div>

      </div>

      <!-- Mobile Menu -->
      <div class="collapse bg-dark" id="mobileMenu">
        <ul class="nav flex-column text-white p-3">
          <li class="nav-item">
            <a class="nav-link text-white" href="./../index.html">Trang chủ</a>
          </li>
          <li class="nav-item">
            <a class="nav-link text-white" href="./product.html">Sản phẩm</a>
          </li>
          <li class="nav-item">
            <a class="nav-link text-white" href="#">Giới thiệu</a>
          </li>
        </ul>
      </div>
    </div>

  </header>
  <!-- CSS -->
  <div class="container mt-5 htsearch-js" style="display: none;">
    <!-- Nút tìm kiếm cơ bản và tìm kiếm nâng cao -->
    <div class="row justify-content-center">
      <div class="col-12 col-md-8">
        <div class="search-css p-4 border rounded shadow-sm">

          <div class="d-flex justify-content-between mb-3">
            <!-- Nút tìm kiếm cơ bản -->
            <button class="btn btn-dark active basic-search-btn1" id="basic-search-btn" data-search-type="basic">Tìm
              kiếm
              cơ bản</button>

            <!-- Nút tìm kiếm nâng cao -->
            <button class="btn btn-dark basic-search-btn2" id="advanced-search-btn" data-search-type="advanced">Tìm kiếm
              nâng cao</button>
          </div>

          <!-- Tìm kiếm cơ bản -->
          <div class="d-flex flex-column" id="basic-search-container">
            <input type="text" class="form-control mb-3" id="basic-search" placeholder="Nhập từ khoá tìm kiếm">
            <button class="btn btn-outline-primary nc-js-1" id="search-button">
              <i class="ri-search-2-line nc-js-1-2"></i> Tìm kiếm cơ bản
            </button>
          </div>

          <!-- Tìm kiếm nâng cao -->
          <div class="d-flex flex-column mt-3" id="advanced-search-container">
            <select class="form-select mb-3 nc-js-2" id="category-filter" style="display: none;">
              <option value="">Tất cả</option>
              <option value="electronics">Áo thun</option>
              <option value="fashion">Áo sơ mi</option>
              <option value="books">Áo Polo</option>
            </select>

            <select class="form-select mb-3 nc-js-2-2" id="price-filter" style="display: none;">
              <option value="all">Tất cả</option>
              <option value="0-200000">Dưới 200.000 VND</option>
              <option value="200000-5000000">200.000 VND - 299.000 VND</option>
              <option value="5000000-10000000">300.000 VND - 499.000 VND</option>
              <option value="10000000">Trên 500.000 VND</option>
            </select>

            <button class="btn btn-outline-secondary nc-js-2-3" style="display: none;">
              <i class="ri-search-2-line"></i> Tìm kiếm nâng cao
            </button>
          </div>

          <!-- Nút tắt -->
          <div class="mt-3">
            <button class="btn btn-outline-danger" id="clear-btn">
              <i class="ri-close-line"></i> Tắt
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>





  <!-- Hiện các  thông báo -->

  <div class="body-signup r-js" style="display: none;">
    <div class="form-wrapper ">
      <div class="close-btn">
        <i class="ri-close-line"></i>
      </div>
      <div class="bbd-signup fwr-js">
        <div class="sign-up-header">ĐĂNG KÝ</div>
        <p>Bạn đã có tài khoản? <a href="./../login.html"><span style="color: blue;">Đăng nhập ngay</span></a></p>
        <div class="sign-up-form">
          <form action="" method="POST" class="form" id="form-1">
            <div class="input-box">
              <span class="detail">Tên đăng nhập</span>
              <input id="name" name="name" type="text" class="form-control" placeholder="Nhập tên đăng nhập của bạn">
              <span class="invalid-message"></span>
            </div>
            <div class="input-box">
              <span class="detail">Email</span>
              <input id="email" name="email" type="text" class="form-control" placeholder="Email">
              <span class="invalid-message"></span>
            </div>
            <!-- <div class="input-box">
                  <span class="detail">Số điện thoại</span>
                  <input id="phone-number" name="phone-number" type="text" class="form-control"
                    placeholder="Số điện thoại">
                  <span class="invalid-message"></span>
                </div> -->
            <div class="input-box">
              <span class="detail">Mật khẩu</span>
              <input id="password" name="password" type="password" class="form-control"
                placeholder="Nhập mật khẩu của bạn">
              <span class="invalid-message"></span>
            </div>
            <div class="input-box">
              <span class="detail">Xác nhận mật khẩu</span>
              <input id="confirm-password" name="confirm-password" type="password" class="form-control"
                placeholder="Xác nhận lại mật khẩu">
              <span class="invalid-message"></span>
            </div>
            <button type="submit" class="sign-up-button form-submit">Đăng ký</button>
          </form>
        </div>
      </div>
    </div>
  </div>
  <div class="body-signup s-js" style="display: none;">
    <div class="form-wrapper fws-js">
      <div class="close-btn">
        <i class="ri-close-line"></i>
      </div>
      <div class="bbd-signup ">

        <h3 class="sign-up-header">ĐĂNG NHẬP</h3>
        <p>Trở thành thành viên của 360 Boutique <a href="./../signup.html"><span style="color: blue;">Đăng ký
              ngay</span></a></p>
        <div class="sign-up-form">
          <form action="" method="post" class="form" id="login">
            <div class="form-group input-box">
              <label for="user">
                <b>Tên đăng nhập <span style="color: red;">&#42;</span></b>
              </label>
              <input class="form-input form-control" name="user" id="user" type="text"
                placeholder="Nhập tên đăng nhập của bạn" required>
              <span class="invalid-message"></span>
            </div>
            <div class="form-group input-box">
              <label for="pass">
                <b>Mật khẩu <span style="color: red;">&#42;</span></b>
              </label>
              <input class="form-input form-control" name="pass" id="pass" type="password" placeholder="Nhập mật khẩu"
                style="position: relative;">
              <span class="show-btn" style="position: absolute;"><i class="fas fa-eye"></i></span>
              <span class="invalid-message"></span>
            </div>

            <div class="sub-form-group">
              <div class="sub1">
                <input type="checkbox" name="" id="remember">
                <label for="remember"><b>Ghi nhớ mật khẩu</b></label>
              </div>
            </div>

            <button type="submit" class="submit-button form-group">ĐĂNG NHẬP</button>
          </form>
        </div>
      </div>
    </div>
  </div>
  <!-- Modal for login warning -->
  <!-- Modal -->
  <div class="login-warning-modal" id="login-warning-modal" style="display: none;">
    <div class="modal-content">
      <span class="close-btn" onclick="closeModal()">&times;</span>
      <p class="modal-text">Vui lòng đăng nhập để thêm sản phẩm vào giỏ hàng.</p>
      <button class="ok-btn" onclick="closeModal()">OK</button>
    </div>
  </div>
  <section class="cart p-to-top" style="margin-top: -30px; padding-top: auto;">
    <div class="container">
      <div class="row-flex row-flex-product-detail">
        <p>Mua hàng</p>
      </div>
      <div class="row-grid">
        <div class="cart-left">
          <h2 class="main-h2">Chi tiết đơn hàng</h2>
          <div class="cart-left-detail">
            <table>
              <thead>
                <tr>
                  <th>Ảnh</th>
                  <th>Sản phẩm</th>
                  <th>Thành tiền</th>
                  <th>Xóa</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
                    <img style="width: 70px"
                      src="./../asset/image/product/WEB1/AoThun/2/2791307203580dc3fe8c3338c67dedf8.webp" alt="" />
                  </td>
                  <td>
                    <div>
                      <div class="product-detail-right-info" id="S">
                        <div style="margin-bottom: 5px;">Áo Thun Nam MS001</div>
                        <h1>Size: S</h1>
                        <div class="product-price" style="display: flex; align-items: center;">
                          <div>
                            200.000đ
                          </div>

                          <div class="product-detail-right-quantity-input" style="">
                            <i class="ri-subtract-fill"></i>
                            <input class="quantity-input" type="number" value="2" />
                            <i class="ri-add-line"></i>
                          </div>
                        </div>
                      </div>
                    </div>
                  </td>
                  <td>
                    <p>200.000đ</p>
                  </td>
                  <td>
                    <i class="ri-delete-bin-line"></i>
                  </td>
                </tr>
              </tbody>
              <tbody class="cart-left-detail-money">
                <td colspan="2">Tổng tiền</td>
                <td colspan="2">400.000 đ</td>
              </tbody>
            </table>
            <br />
            <button class="main-btn">Cập nhật đơn hàng</button>
            <a href="">Tiếp tục mua hàng >></a>
          </div>
        </div>
        <div class="cart-right">
          <div class="cart-right-header">
            <h2 class="main-h2">Thông tin giao hàng</h2>
            <div class="cart-right-select-address">
              <select id="address-option" name="address-option">
                <option value="default">Địa chỉ mặc định</option>
                <option value="new">Địa chỉ mới</option>
              </select>
            </div>
          </div>

          <div class="cart-right-inputs">
            <input type="text" id="name-order" placeholder="Tên" value="Nhi" />
            <input type="text" id="phone" placeholder="Số điện thoại" value="0336328273" />
            <input type="text" id="gmail" placeholder="Email" value="nhi@example.com" />
            <select id="tinh" name="tinh">
              <option value="TP HCM" selected>TP HCM</option>
              <option value="Ha Noi">Hà Nội</option>
              <option value="Da Nang">Đà Nẵng</option>
            </select>
            <input type="text" id="address" placeholder="Địa chỉ chi tiết" value="123 Nguyễn Văn Linh" />
            <input type="text" id="note" placeholder="Ghi chú" value="Không giao buổi sáng" />
          </div>

          <br>
          <button class="main-btn" onclick="window.location.href='./checkout.html'">Thanh toán</button>

        </div>
  </section>

  <!-- Modal -->
  <div class="modal" id="myModal">
    <div class="modal-content">
      <h2>Thông báo</h2>
      <p>Vui lòng đăng nhập để xem giỏ hàng.</p>
      <div class="modal-actions">
        <button class="btn-login">Đăng Nhập</button>
      </div>
      <!-- Nút đóng ở ngoài button -->
      <span class="close">&times;</span>
    </div>
  </div>



  <script src="./../vendor/bootstrap-5.0.2-dist/js/bootstrap.bundle.min.js"></script>
  <script src="./../asset/js/dssp.js"></script>
  <script src="./../asset/js/script.js"></script>
  <script src="./../asset/js/script1.js"></script>
  <script src="./../asset/js/validator.js"></script>

  <script>
    clickSearch();
    load();
    document.getElementById("logout").addEventListener('click', function () {
      // Xóa thông tin người dùng trong localStorage
      localStorage.setItem('user', JSON.stringify(null));
      // // Hiển thị lại form đăng ký
      // document.querySelector('.show-signup').style.display = '';
      // // Ẩn thông tin tài khoản
      location.href = "./../index.html";
    });
  </script>
  <script>
    const addressOption = document.getElementById('address-option');
    const formFields = document.querySelectorAll('.cart-right-inputs input, .cart-right-inputs select');

    function toggleFields(disable) {
      const formFields = document.querySelectorAll('.cart-right-inputs input, .cart-right-inputs select'); // Lấy tất cả các trường trong form

      formFields.forEach(field => {
        if (field.id !== 'note') { // Kiểm tra nếu không phải trường ghi chú
          field.disabled = disable; // Vô hiệu hóa hoặc kích hoạt các trường
        }
      });
    }


    // Lắng nghe sự thay đổi của dropdown "Địa chỉ mặc định/Địa chỉ mới"
    addressOption.addEventListener('change', function () {
      if (this.value === 'default') {
        toggleFields(true); // Khóa các trường khi chọn "Địa chỉ mặc định"
      } else {
        toggleFields(false); // Mở khóa các trường khi chọn "Địa chỉ mới"
      }
    });

    // Ban đầu: Khóa các trường (vì mặc định là "Địa chỉ mặc định")
    toggleFields(true);

  </script>
  <script>
    //CLick tìm kiếm nâng cao

    function clickSearch() {
      document.querySelector(".header-search").addEventListener("click", function () {
        console.log("click rồi nè");
        this.style.display = "none"; // Ẩn thẻ bằng cách đặt display thành "none"
        document.querySelector(".search-css").style.display = "";
        document.querySelector(".search-delete").style.display = "";
        // console.log(document.querySelector(".clear-btn"));
        // document.querySelector(".clear-btn").style.display = "";


      });
      document.querySelector(".clear-btn").addEventListener("click", function () {
        document.querySelector(".search-css").style.display = "none";
        document.querySelector(".search-delete").style.display = "none";
        document.querySelector(".header-search").style.display = "";
      })
      // document.querySelector(".sb-input").addEventListener("click", function () {
      //   console.log(document.querySelector(".sb-input").style);
      //   // document.querySelector(".sb-input").style;
      // })
      document.querySelector(".search-nc").addEventListener("click", function () {
        if (document.querySelector(".search-nc").innerHTML == "Tìm kiếm cơ bản") {
          document.querySelector(".category-css").style.display = "none";
          document.querySelector(".price-css").style.display = "none";
          document.querySelector(".search-nc").innerHTML = "Tìm kiếm nâng cao";
        }
        else {
          document.querySelector(".category-css").style.display = "";
          document.querySelector(".price-css").style.display = "";
          document.querySelector(".search-nc").innerHTML = "Tìm kiếm cơ bản";
        }



      })

    }
    clickSearch();
    document.querySelectorAll('.btn-dm').forEach(button => {
      button.addEventListener('click', function () {
        // Xóa active và nền đen cho tất cả các nút
        document.querySelectorAll('.btn-dm').forEach(btn => {
          btn.classList.remove('active');
          btn.classList.remove('btn-dark'); // Bỏ nền đen
          btn.classList.add('btn-light'); // Đảm bảo các nút khác có nền sáng
        });
        // Thêm active và nền đen cho nút được click
        this.classList.add('active');
        this.classList.add('btn-dark'); // Thêm nền đen khi active
        this.classList.remove('btn-light'); // Bỏ nền sáng khi active
      });
    });
  </script>
  <script>
    Validator({
      form: '#form-1',
      rules: [
        Validator.isRequired('#name', 'Vui lòng nhập tên đăng nhập'),
        Validator.isRequired('#email', 'Vui lòng nhập email'),
        Validator.isEmail('#email'),
        Validator.isRequired('#password', 'Vui lòng nhập mật khẩu'),
        Validator.minLength('#password', 8),
        Validator.isRequired('#confirm-password', 'Vui lòng xác nhận lại mật khẩu'),
        Validator.isConfirmed('#confirm-password', function () {
          return document.querySelector('#form-1 #password').value;
        }, 'Mật khẩu nhập lại không chính xác')
      ],
      onSubmit: function (data) {
        console.log("bấm rồi nè1");
        let tmp = {
          data,
          cart: []
        }
        // let userList = (JSON.parse(localStorage.getItem('userList'))) || [];
        let userList = [];
        userList.push(tmp);
        document.querySelector('.r-js').style.display = 'none';
        console.log("Đăng ký thành công");
        localStorage.setItem('userList', JSON.stringify(userList));
        console.log(JSON.parse(localStorage.getItem('userList')));
        document.querySelector('.s-js').style.display = 'flex';

      }
    });
  </script>
  <script>
    console.log(document.querySelector('.show-signup').style);
    const user = JSON.parse(localStorage.getItem('user'));
    if (user != null) {
      document.querySelector('.show-signup').style.display = 'none';
      document.querySelector('.ac').style.display = '';
      setcart();
    }
    const logoutButton = document.getElementById("logout");

    logoutButton.addEventListener('click', function () {
      // Xóa thông tin người dùng trong localStorage
      localStorage.setItem('user', JSON.stringify(null));

      // // Ẩn thông tin tài khoản
      document.querySelector('.ac').style.display = 'none';
      document.querySelector('.header-account').style.display = "";

    });

    document.addEventListener('DOMContentLoaded', () => {
      // Lấy các phần tử cần thiết
      const cartIcon = document.querySelector('.header-cart i');
      const modal = document.getElementById('myModal');  // Sửa lại ID để khớp với HTML
      const closeModal = modal.querySelector('.close');
      const loginButton = modal.querySelector('.btn-login');
      const closeButton = modal.querySelector('.btn-close');

      // Mở modal khi click vào icon giỏ hàng
      cartIcon.addEventListener('click', () => {
        const user = JSON.parse(localStorage.getItem('user'));
        if (!user) {
          // Nếu chưa đăng nhập, hiển thị modal
          modal.style.display = 'flex';
        } else {
          // Nếu đã đăng nhập, chuyển hướng đến trang giỏ hàng
          window.location.href = './cart.html';
        }
      });

      // Đóng modal khi click vào dấu X
      closeModal.addEventListener('click', () => {
        modal.style.display = 'none';
      });

      // Đóng modal khi click vào nút "Đóng"
      closeButton.addEventListener('click', () => {
        modal.style.display = 'none';
      });

      // Chuyển hướng đến trang đăng nhập khi click vào nút "Đăng Nhập"
      loginButton.addEventListener('click', () => {
        window.location.href = './login.html';
      });

      // Đóng modal khi click bên ngoài modal
      window.addEventListener('click', (event) => {
        if (event.target === modal) {
          modal.style.display = 'none';
        }
      });
    });

    Validator_login({
      form: '#login',
      rules: [
        Validator_login.isRequired('#user', 'Vui lòng nhập tên đăng nhập'),
        Validator_login.isRequired('#pass', 'Vui lòng nhập mật khẩu')
      ],
      onSubmit: function (data) {
        let userList = (JSON.parse(localStorage.getItem('userList'))) || [];

        console.log("bấm rồi nè")
        console.log(userList);
        let check = false;
        for (let i = 0; i < userList.length; i++) {
          if (userList[i].data.name === data.user && userList[i].data.password === data.pass) {
            check = true;
            usercart = userList[i];
            localStorage.setItem('user', JSON.stringify(userList[i]));
            // let usercart = JSON.parse(localStorage.getItem('user'));
            console.log(JSON.parse(localStorage.getItem('user')));
            console.log("đăng nhập thành công");

          }
        }
        if (check) {
          // window.location.href = "index.html";
          document.querySelector('.s-js').style.display = 'none';
          console.log("đăng nhập thành công");
          document.querySelector('.show-signup').style.display = 'none';
          document.querySelector('.ac').style.display = '';
          setcart();
          // document.querySelector('.login-fail').innerHTML = '';
        } else {
          // document.querySelector('.login-fail').innerHTML = 'Sai tên đăng nhập hoặc mật khẩu';
          console.log("lỗi nè")
        }
        document.querySelector('.form-input').value = ''
        console.log(JSON.parse(localStorage.getItem('userList')));
      }
    });
    // Xử lý sự kiện khi nhấn vào các nút size
    document.querySelectorAll('.size-btn').forEach(button => {
      button.addEventListener('click', function () {
        console.log(this);
        // Xóa trạng thái active của tất cả các nút size
        document.querySelectorAll('.size-btn').forEach(btn => {
          btn.classList.remove('active');
        });
        // Thêm trạng thái active cho nút được nhấn
        this.classList.add('active');
      });
    });


  </script>
  <script>function vnd(price) {
      return price.toLocaleString("vi-VN", { style: "currency", currency: "VND" });
    }
    var productAll = JSON.parse(localStorage.getItem("products")).filter(
      (item) => item.status == 1
    );

    function getProductInfo(masp) {
      let products = JSON.parse(localStorage.getItem("products"));
      return products.find((item) => {
        return item.masp == masp;
      });
    }

    function detailProduct(masp) {
      let product = getProductInfo(masp);
      let productDetail = document.querySelector(".product-detail");
      productDetail.innerHTML = `
   <div class="container">
        <div class="row-flex row-flex-product-detail">
          <p>Sản phẩm</p>
          <i class="ri-arrow-right-line"> </i>
          <p>${product.masp}</p>
        </div>
        <div class="row-grid">
          <div class="product-detail-left">
            <img
              class="product-image-main"
              src="${product.product_image.bigImg}"
              alt=""
            />
            <div class="product-image-items">
              <img
                class="active"
                src="${product.product_image.bigImg}"
                alt=""
              />
              <img
                src="${product.product_image.smallImg1}"
                alt=""
              />
              <img
                src="${product.product_image.smallImg2}"
                alt=""
              />
              <img
                src="${product.product_image.smallImg3}"
                alt=""
              />
            </div>
          </div>
          <div class="product-detail-right">
            <div class="product-detail-right-info">
              <h1>${product.product_name}</h1>
              <span>${product.product_material}</span>
              <div class="product-price">
                <p class="price">${vnd(product.product_price)} <del>${vnd(
        product.product_del
      )}</del></p>
              </div>
            </div>
            <div class="product-detail-right-des">
              <h2>Đặc điểm nổi bật</h2>
              <ul>
                <li>${product.detail.dong1}</li>
                 <li>${product.detail.dong2}</li>
                 <li>${product.detail.dong3}</li>
                <li>${product.detail.dong4}</li>
                 <li>${product.detail.dong5}</li>
                <li>Tự hào sản xuất tại Việt Nam</li>
              </ul>
            </div>
            <div class="product-detail-right-quantity">
              <h2>Số lượng:</h2>
              <div class="product-detail-right-quantity-input">
                <i class="ri-subtract-fill"></i>
                <input
                  onkeydown="return false"
                  class="quantity-input"
                  type="number"
                  value="1"
                />
                <i class="ri-add-line"></i>
              </div>
            </div>
            <div class="product-detail-right-addcart">
              <button id="add"  class="main-btn" onclick="addToCart('${product.masp
        }')">Thêm vào giỏ hàng</button>
            </div>
          </div>
        </div>
        <div class="row-flex">
          <div class="product-detail-content">
            <h2>Chi tiết sản phẩm</h2>
            <p>
              Áo thun nam là một trong những item cơ bản và linh hoạt nhất trong tủ đồ của phái mạnh. Với thiết kế đơn giản nhưng không kém phần thời trang, áo thun nam có thể kết hợp với nhiều loại quần và phụ kiện khác nhau, tạo nên những phong cách đa dạng từ năng động, trẻ trung đến lịch lãm, trưởng thành.
            </p>
     </div>
        </div>
      </div>
    `;
      productDetail.style.display = "block";
    }
    // product detail
    const imageSmall = document.querySelectorAll(".product-image-items img");
    const imageBig = document.querySelector(".product-image-main");
    for (let i = 0; i < imageSmall.length; i++) {
      imageSmall[i].addEventListener("click", () => {
        imageBig.src = imageSmall[i].src;
        imageSmall[i].classList.add("active");
        for (let j = 0; j < imageSmall.length; j++) {
          if (i !== j) {
            imageSmall[j].classList.remove("active");
          }
        }
      });
    }
    // quantity product
    if (document.querySelector(".quantity-input") != null) {
      document.querySelector(".ri-add-line").addEventListener("click", () => {
        document.querySelector(".quantity-input").value++;
      });
      document.querySelector(".ri-subtract-fill").addEventListener("click", () => {
        if (document.querySelector(".quantity-input").value > 1) {
          document.querySelector(".quantity-input").value--;
        }
      });
    }</script>

  <script>
    console.log("Vaof ddc ")
    let output = document.querySelector(".product-detail-js");
    const urlParams = new URLSearchParams(window.location.search);
    const productId = urlParams.get('id');
    console.log("productid: ${productId}");
  </script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // Lấy các phần tử cần thiết
      const cartIcon = document.querySelector('.header-cart i');
      const modal = document.getElementById('myModal');  // Sửa lại ID để khớp với HTML
      const closeModal = modal.querySelector('.close');
      const loginButton = modal.querySelector('.btn-login');
      const closeButton = modal.querySelector('.btn-close');

      // Mở modal khi click vào icon giỏ hàng
      cartIcon.addEventListener('click', () => {
        const user = JSON.parse(localStorage.getItem('user'));
        if (!user) {
          // Nếu chưa đăng nhập, hiển thị modal
          modal.style.display = 'flex';
        } else {
          // Nếu đã đăng nhập, chuyển hướng đến trang giỏ hàng
          window.location.href = './cart.html';
        }
      });

      // Đóng modal khi click vào dấu X
      closeModal.addEventListener('click', () => {
        modal.style.display = 'none';
      });

      // Đóng modal khi click vào nút "Đóng"
      closeButton.addEventListener('click', () => {
        modal.style.display = 'none';
      });

      // Chuyển hướng đến trang đăng nhập khi click vào nút "Đăng Nhập"
      loginButton.addEventListener('click', () => {
        window.location.href = './login.html';
      });

      // Đóng modal khi click bên ngoài modal
      window.addEventListener('click', (event) => {
        if (event.target === modal) {
          modal.style.display = 'none';
        }
      });
    });</script>
</body>

</html>